## 1. è¯¾å ‚Tip

### 1.1. linuxå‘½ä»¤

```
ls // æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ˆä¸åŒ…å«éšè—æ–‡ä»¶ï¼Œéšè—æ–‡ä»¶å³ä»¥.å¼€å¤´çš„æ–‡ä»¶ï¼‰
ls -la // æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…å«éšè—æ–‡ä»¶ï¼‰
cat æ–‡ä»¶å // æŸ¥çœ‹æ–‡ä»¶å†…å®¹
pwd // å½“å‰çš„å·¥ä½œç›®å½•çš„è·¯å¾„
```

### 1.2. npmå‘½ä»¤

```
npm view gulp versions // æŸ¥çœ‹gulpå·²å‘å¸ƒçš„ç‰ˆæœ¬
```

![](http://rc9frlwp7.hn-bkt.clouddn.com/Nodeå·¥å…·-.æŸ¥çœ‹gulpçš„ç‰ˆæœ¬.png)

## 2. NVM: Node Version Managerï¼ˆNodeç‰ˆæœ¬ç®¡ç†ï¼‰

å¯ç”¨äºåœ¨ä¸åŒnodeç‰ˆæœ¬é—´åˆ‡æ¢ã€‚

**nvmå¸¸ç”¨å‘½ä»¤ï¼š**

```
nvm list // åˆ—ä¸¾å·²å®‰è£…çš„nodeçš„ç‰ˆæœ¬
nvm use ç‰ˆæœ¬å· // åˆ‡æ¢åˆ°æŸä¸ªç‰ˆæœ¬
```

## 3. NPM: Node Package Managerï¼ˆNodeåŒ…ç®¡ç†ï¼‰

### 3.1. package.jsonåˆå§‹åŒ–: `npm init -y`

`-y`ï¼šæ˜¯æŒ‡å¯¹æ‰€æœ‰çš„å¾…ç¡®è®¤æƒ³éƒ½é€‰yesã€‚

```json
{
  "name": "Desktop",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

### 3.2. åŒ…çš„å®‰è£…

#### 3.2.1. å…¨å±€å®‰è£…: `npm i(install) åŒ…å --global(-g)`

å…¨å±€å®‰è£…åŒ…çš„ç›®å½•ï¼š

- Macï¼š`/Users/felix/.nvm/versions/node/nvmå„ä¸ªç‰ˆæœ¬/bin/`;
- Windows: `C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Roaming\npm\node_modules`ã€‚

#### 3.2.2. æœ¬åœ°å®‰è£…: `npm i(install) åŒ…å`

#### 3.2.3. å¼€å‘ä¾èµ–(devDependencies): `npm i(install) åŒ…å --save-dev(-D)`

#### 3.2.4. ç”Ÿäº§ä¾èµ–(dependencies): `npm i(install) åŒ…å --save(-S)`

#### 3.2.5. å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…: `npm i(install) åŒ…å@1.0.0`

#### 3.2.6. ã€â—æ³¨æ„ã€‘npmåŒ…ç‰ˆæœ¬ç¬¦å·ï¼š`[~/^/*/ç©º][major].[minor].[patch]`

ç‰ˆæœ¬å·ä¸€èˆ¬æœ‰å››ä¸ªéƒ¨åˆ†ï¼ŒğŸŒ°æ¯”å¦‚`[~/^/*/ç©º]13.4.6`ï¼š

- ä¸»ç‰ˆæœ¬å·(major)ï¼š`13`
- æ¬¡ç‰ˆæœ¬å·(minor)ï¼š`4`
- è¡¥ä¸(patch)ï¼š`6`
  - ä¸€èˆ¬å¶æ•°è¡¨ç¤ºç¨³å®šç‰ˆï¼Œå¥‡æ•°è¡¨ç¤ºæµ‹è¯•ç‰ˆã€‚
- majorå‰çš„ç¬¦å·ï¼š
  - `^`ï¼šé”å®šmajorã€‚å¦‚`^13.4.6`ä¼šå›ºå®šä¸‹è½½majorä¸º13çš„åŒ…ï¼Œminorå’Œpatchä¸å›ºå®šï¼›
  - `~`ï¼šé”å®šmajorå’Œminorã€‚å¦‚`~13.4.6`ä¼šå›ºå®šä¸‹è½½majorä¸º13ä¸”minorä¸º4çš„åŒ…ï¼Œpatchä¸å›ºå®šï¼›
  - `ç©º`ï¼šé”å®šmajorã€minorå’Œpatchã€‚å¦‚`13.4.6`ä¼šå›ºå®šä¸‹è½½13.4.6è¿™ä¸ªç‰ˆæœ¬çš„åŒ…ï¼›
  - `*`ï¼šæœ€æ–°ç‰ˆæœ¬ã€‚å¦‚`*13.4.6`ï¼Œä¸è®ºç‰ˆæœ¬å·å†™çš„å¤šå°‘ï¼Œåªä¼šå›ºå®šä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„åŒ…ã€‚

#### 3.2.7. npmå®‰è£…gitä¸Šå‘å¸ƒçš„åŒ…

```
// è¿™æ ·é€‚åˆå®‰è£…å…¬å¸å†…éƒ¨çš„gitæœåŠ¡å™¨ä¸Šçš„é¡¹ç›®

// httpsæ–¹å¼
npm install git+https://git@github.com:lurongtao/gp-project.git

// sshæ–¹å¼
npm install git+ssh://git@github.com:lurongtao/gp-project.git
```

### 3.3. åŒ…çš„å¸è½½

#### 3.3.1. å…¨å±€åŒ…å¸è½½: `npm uninstall åŒ…å --global(-g)`

#### 3.3.2. æœ¬åœ°åŒ…å¸è½½: `npm uninstall åŒ…å`

#### 3.3.3. å¼€å‘ä¾èµ–å¸è½½: `npm uninstall åŒ…å --save-dev(-D)`

#### 3.3.4. ç”Ÿäº§ä¾èµ–å¸è½½: `npm uninstall åŒ…å --save(-S)`

### 3.4. åŒ…çš„æ›´æ–°ï¼š`npm update`

- å…ˆæŸ¥çœ‹è¿‡æ—¶çš„åŒ…ï¼š`npm outdated`ï¼›
- å†æ›´æ–°ï¼š`npm update`

### 3.5. æ¸…é™¤ç¼“å­˜ï¼š`npm cache clean --force`

### 3.6. ä¸Šä¼ è‡ªå·±çš„åŒ…

#### 3.6.1. ç¼–å†™æ¨¡å—(ä»£ç )

ä¿å­˜ä¸ºindex.js

```js
exports.sayHello = function(){ 
  return 'Hello World'; 
}
```

#### 3.6.2. åˆå§‹åŒ–åŒ…æè¿°æ–‡ä»¶: `npm init`

```json
{ 
  "name": "gp19-npm", 
  "version": "1.0.1", 
  "description": "gp19 self module", 
  "main": "index.js",
  "scripts": { 
    "test": "make test" 
  }, 
  "repository": { 
    "type": "Git", 
    "url": "git+https://github.com/lurongtao/gp19-npm.git" 
  }, 
  "keywords": [ 
    "demo" 
  ], 
  "author": "Felixlu", 
  "license": "ISC", 
  "bugs": { 
    "url": "https://github.com/lurongtao/gp19-npm/issues" 
  }, 
  "homepage": "https://github.com/lurongtao/gp19-npm#readme", 
}
```

#### 3.6.3. æ³¨å†Œnpmä»“åº“è´¦å·åï¼š`npm adduser`

#### 3.6.4. ä¸Šä¼ åŒ…: `npm publish`

**ã€â—å‘ã€‘403 Forbiddenï¼š**

- æŸ¥çœ‹npmæºï¼š`npm config get registry`;
- åˆ‡æ¢npmæºï¼š
  - æ³•ä¸€ï¼š`npm config set registry http://registry.npmjs.org`ï¼›
  - æ³•äºŒï¼š`nrm use npm`ã€‚

#### 3.6.5. å®‰è£…åŒ…ï¼š`npm install gp19-npm`

#### 3.6.6. å–æ¶ˆå‘å¸ƒï¼š`npm unpublish --force`

#### 3.6.7. ä½¿ç”¨å¼•å…¥çš„åŒ…

```js
var hello = require('gp19-npm');
hello.sayHello();
```

### 3.7. npmè„šæœ¬(scripts)

#### 3.7.1. ä»€ä¹ˆæ˜¯npmè„šæœ¬

å½“å®‰è£…çš„åŒ…ç±»ä¼¼äºgulpï¼Œæ˜¯å‘½ä»¤è¡Œå·¥å…·æ—¶ï¼Œæœ¬åœ°å®‰è£…çš„è¯ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦åˆ°`node_modules/.bin/`æ‰¾åˆ°å¯¹åº”çš„å·¥å…·åå†åœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ä½¿ç”¨ï¼š
![](http://rc9frlwp7.hn-bkt.clouddn.com/node-scripts-1122.png)

è¿™æ ·éå¸¸ç¹çï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•è§£å†³å‘¢ï¼Ÿè¿™å°±å¾—ç”¨åˆ°è„šæœ¬ğŸ‘‡

**å†™æ³•ä¸€ï¼š**  
![](http://rc9frlwp7.hn-bkt.clouddn.com/Nodeå·¥å…·-æœ¬åœ°å®‰è£…-scripts.png)

**å†™æ³•äºŒï¼š**  
å› ä¸ºscriptsé‡Œè¾¹çš„å‘½ä»¤ï¼Œæ‰¾åŒ…æ—¶é»˜è®¤ä¼šä»node_moduleså¼€å§‹æ‰¾ï¼Œæ‰€ä»¥å¯ä»¥ç®€å†™ä¸ºï¼š
![](http://rc9frlwp7.hn-bkt.clouddn.com/Nodeå·¥å…·-åŒ…ç®¡ç†-scripts1.png)

#### 3.7.2. æ‰§è¡Œé¡ºåº

**1) å¹¶è¡Œæ‰§è¡Œ(`&`)ï¼š**  

```
// å¦‚æœæ˜¯å¹¶è¡Œæ‰§è¡Œï¼ˆå³åŒæ—¶çš„å¹³è¡Œæ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ & ç¬¦å·ã€‚
npm run script1 & npm run script2
```

**2) ä¸²è¡Œæ‰§è¡Œ(`&&`)ï¼š**  

```
// å¦‚æœæ˜¯ç»§å‘æ‰§è¡Œï¼ˆå³åªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ && ç¬¦å·ã€‚
npm run script1 && npm run script2
```

#### 3.7.3. ç®€å†™å½¢å¼

`npm start` æ˜¯ `npm run start`ã€‚

#### 3.7.4. å˜é‡

**1) JSè·å–npmå†…éƒ¨å˜é‡(`process.env + npm_package_å‰ç¼€`)ï¼š**  

åŠ ä¸Š`npm_package_` å‰ç¼€ï¼Œå°±å¯ä»¥åœ¨jsä¸­é€šè¿‡`process.env.npm_package_`è·å–åˆ°package.jsoné‡Œé¢çš„å­—æ®µã€‚

```
// package.json
{
  "name": "nodetest",
  "version": "1.0.1",
  "description": "",
  "main": "index.js",
  "scripts": {
    "view": "node view.js",
  },
  "repository": {
    "type": "git"
  },
  "author": "",
  "license": "ISC"
}

// view.js
console.log(process.env.npm_package_name); // nodetest
console.log(process.env.npm_package_version); // 1.0.1
console.log(process.env.npm_package_repository_type); // git

// è·‘ï¼šnpm run viewï¼Œåˆ†åˆ«æ‰“å° nodetest, 1.0.1, git
```

**2) è„šæœ¬ä¸­è·å–npmå†…éƒ¨å˜é‡(`$npm_package_å‰ç¼€`)ï¼š**  

åŠ ä¸Š`$npm_package_` å‰ç¼€ï¼Œå°±å¯ä»¥åœ¨scriptsä¸­æ‹¿åˆ°package.jsoné‡Œé¢çš„å­—æ®µã€‚

```
// package.json
{
  "name": "nodetest",
  "version": "1.0.1",
  "description": "",
  "main": "index.js",
  "scripts": {
    "view": "echo $npm_package_repository_type",
  },
  "repository": {
    "type": "git"
  },
  "author": "",
  "license": "ISC"
}

// è·‘npm run viewï¼Œå°±å¯ä»¥è®¿é—®åˆ°typeçš„å€¼gitï¼ˆâ—å¾…éªŒè¯ï¼Œæˆ‘æœ¬åœ°æ²¡æ‹¿åˆ°ï¼‰
```

**3) è·å–npmå†…éƒ¨é…ç½®(`npm_config_å‰ç¼€`)ï¼š**  

ä¸ä¸Šé¢ç±»ä¼¼ï¼š

- åœ¨JSä¸­è·å–ï¼š`process.env.npm_config_tag`ï¼›
- åœ¨è„šæœ¬ä¸­è·å–ï¼š`$npm_config_tag`ã€‚

â—æ³¨æ„ï¼špackage.jsoné‡Œé¢çš„`config`å¯¹è±¡ï¼Œå¯ä»¥è¢«ç¯å¢ƒå˜é‡è¦†ç›–ã€‚

**4) `env`å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ï¼š**  

æœ€åï¼Œenvå‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚

```
// package.json
{
  "name": "nodetest",
  "version": "1.0.1",
  "description": "",
  "main": "index.js",
  "scripts": {
    "tenv": "env"
  },
  "author": "",
  "license": "ISC"
}

// è·‘npm run tenvï¼Œä¼šæ‰“å°å‡ºenvå¯¹è±¡çš„æ‰€æœ‰å€¼ã€‚
```

### 3.8. cross-envä½¿ç”¨

#### 3.8.1. cross-envæ˜¯ä»€ä¹ˆ

è¿è¡Œè·¨å¹³å°è®¾ç½®å’Œä½¿ç”¨ç¯å¢ƒå˜é‡çš„è„šæœ¬.

#### 3.8.2. å‡ºç°åŸå› 

å½“æ‚¨ä½¿ç”¨ NODE_ENV=production, æ¥è®¾ç½®ç¯å¢ƒå˜é‡æ—¶ï¼Œå¤§å¤šæ•° Windows å‘½ä»¤æç¤ºå°†ä¼šé˜»å¡(æŠ¥é”™)ã€‚ï¼ˆå¼‚å¸¸æ˜¯Windowsä¸Šçš„Bashï¼Œå®ƒä½¿ç”¨æœ¬æœºBashã€‚ï¼‰æ¢è¨€ä¹‹ï¼ŒWindows ä¸æ”¯æŒ NODE_ENV=production çš„è®¾ç½®æ–¹å¼ã€‚

#### 3.8.3. è§£å†³

cross-env ä½¿å¾—æ‚¨å¯ä»¥ä½¿ç”¨å•ä¸ªå‘½ä»¤ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¸ºå¹³å°æ­£ç¡®è®¾ç½®æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚è¿™ä¸ªè¿·ä½ çš„åŒ…(cross-env)èƒ½å¤Ÿæä¾›ä¸€ä¸ªè®¾ç½®ç¯å¢ƒå˜é‡çš„ scriptsï¼Œè®©ä½ èƒ½å¤Ÿä»¥ Unix æ–¹å¼è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨ Windows ä¸Šä¹Ÿèƒ½å…¼å®¹è¿è¡Œã€‚

#### 3.8.4. å®‰è£…

`npm install --save-dev cross-env`

#### 3.8.5. ä½¿ç”¨

```json
{
  "scripts": {
    "build": "cross-env NODE_ENV=production webpack --config build/webpack.config.js"
  }
}
```

NODE_ENVç¯å¢ƒå˜é‡å°†ç”± cross-env è®¾ç½® æ‰“å° process.env.NODE_ENV === 'production'

## 4. NRM: NPM registry manager (NPMæºç®¡ç†)

NRM (npm registry manager)æ˜¯npmçš„é•œåƒæºç®¡ç†å·¥å…·ï¼Œæœ‰æ—¶å€™å›½å¤–èµ„æºå¤ªæ…¢ï¼Œä½¿ç”¨è¿™ä¸ªå°±å¯ä»¥å¿«é€Ÿåœ°åœ¨ npm æºé—´åˆ‡æ¢ã€‚

### 4.1. ä¸ä½¿ç”¨NRM-æ‰‹å·¥åˆ‡æ¢æº

å¦‚æœä¸ä½¿ç”¨

- æŸ¥çœ‹å½“å‰æºï¼š`npm config get registry`;
- åˆ‡æ¢æ·˜å®æºï¼š`npm config set registry https://registry.npm.taobao.org`

### 4.2. NRMç®¡ç†æº

#### 4.2.1. å…¨å±€å®‰è£…nrm

`npm install -g nrm`

#### 4.2.2. ä½¿ç”¨nrm

- æŸ¥çœ‹å¯é€‰æºï¼š`nrm ls`ï¼Œå…¶ä¸­å¸¦`*`çš„æ˜¯å½“å‰ä½¿ç”¨çš„æºï¼Œä¸Šé¢çš„è¾“å‡ºè¡¨æ˜å½“å‰æºæ˜¯å®˜æ–¹æºï¼›
  ![](http://rc9frlwp7.hn-bkt.clouddn.com/nrm-ls.png)
- åˆ‡æ¢æºï¼š`nrm use taobao`ï¼›
- æµ‹è¯•é€Ÿåº¦ï¼š`nrm test`ã€‚

## 5. NPX: NPM Package Extention

npm ä»5.2ç‰ˆå¼€å§‹ï¼Œå¢åŠ äº† npx å‘½ä»¤ã€‚å®ƒæœ‰å¾ˆå¤šç”¨å¤„ï¼Œæœ¬æ–‡ä»‹ç»è¯¥å‘½ä»¤çš„ä¸»è¦ä½¿ç”¨åœºæ™¯ã€‚

Node è‡ªå¸¦ npm æ¨¡å—ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ npx å‘½ä»¤ã€‚ä¸‡ä¸€ä¸èƒ½ç”¨ï¼Œå°±è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ï¼š`npm install -g npx`ã€‚

### 5.1. åŸç†

npxçš„åŸç†å¾ˆç®€å•ï¼Œè¿è¡Œçš„æ—¶å€™ä¼šåˆ°`node_modules/.bin`è·¯å¾„å’Œç¯å¢ƒå˜é‡`$PATH`é‡Œé¢æ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨ï¼š

- å­˜åœ¨ï¼šç›´æ¥ä½¿ç”¨ï¼›
- ä¸å­˜åœ¨ï¼šå…ˆä¸‹è½½åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œä½¿ç”¨åå†åˆ é™¤ã€‚

### 5.2. ä½¿ç”¨

```
npx create-react-app my-react-app
```

#### 5.2.1. `--no-install`å‚æ•°ï¼šå¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—

npx å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—ï¼Œä¸ä¸‹è½½è¿œç¨‹æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨--no-installå‚æ•°ã€‚å¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥æ¨¡å—ï¼Œå°±ä¼šæŠ¥é”™ã€‚

```
npx --no-install http-server
```

#### 5.2.2. `--ignore-existing`å‚æ•°ï¼šå¼ºåˆ¶å®‰è£…ä½¿ç”¨è¿œç¨‹æ¨¡å—

å¦‚æœå¿½ç•¥æœ¬åœ°çš„åŒåæ¨¡å—ï¼Œå¼ºåˆ¶å®‰è£…ä½¿ç”¨è¿œç¨‹æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨--ignore-existingå‚æ•°ã€‚

```
// æœ¬åœ°å·²ç»å®‰è£…äº†http-serverï¼Œä½†è¿˜æ˜¯æƒ³ä½¿ç”¨è¿œç¨‹æ¨¡å—ï¼Œå°±ç”¨è¿™ä¸ªå‚æ•°ã€‚
npx --ignore-existing http-server
```
