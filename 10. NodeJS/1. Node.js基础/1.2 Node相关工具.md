## 1. 课堂Tip

### 1.1. linux命令

```
ls // 查看所有文件（不包含隐藏文件，隐藏文件即以.开头的文件）
ls -la // 查看所有文件（包含隐藏文件）
cat 文件名 // 查看文件内容
pwd // 当前的工作目录的路径
```

### 1.2. npm命令

```
npm view gulp versions // 查看gulp已发布的版本
```

![](https://gitee.com/ahuang6027/blog-images/raw/master/images/Node工具-.查看gulp的版本.png)

## 2. NVM: Node Version Manager（Node版本管理）

可用于在不同node版本间切换。

**nvm常用命令：**

```
nvm list // 列举已安装的node的版本
nvm use 版本号 // 切换到某个版本
```

## 3. NPM: Node Package Manager（Node包管理）

### 3.1. package.json初始化: `npm init -y`

`-y`：是指对所有的待确认想都选yes。

```json
{
  "name": "Desktop",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

### 3.2. 包的安装

#### 全局安装: `npm i(install) 包名 --global(-g)`

全局安装包的目录：

- Mac：`/Users/felix/.nvm/versions/node/nvm各个版本/bin/`;
- Windows: `C:\Users\你的用户名\AppData\Roaming\npm\node_modules`。

#### 本地安装: `npm i(install) 包名`

#### 开发依赖(devDependencies): `npm i(install) 包名 --save-dev(-D)`

#### 生产依赖(dependencies): `npm i(install) 包名 --save(-S)`

#### 安装指定版本的包: `npm i(install) 包名@1.0.0`

#### 【❗注意】npm包版本符号：`[~/^/*/空][major].[minor].[patch]`

版本号一般有四个部分，🌰比如`[~/^/*/空]13.4.6`：

- 主版本号(major)：`13`
- 次版本号(minor)：`4`
- 补丁(patch)：`6`
  - 一般偶数表示稳定版，奇数表示测试版。
- major前的符号：
  - `^`：锁定major。如`^13.4.6`会固定下载major为13的包，minor和patch不固定；
  - `~`：锁定major和minor。如`~13.4.6`会固定下载major为13且minor为4的包，patch不固定；
  - `空`：锁定major、minor和patch。如`13.4.6`会固定下载13.4.6这个版本的包；
  - `*`：最新版本。如`*13.4.6`，不论版本号写的多少，只会固定下载最新版本的包。

### 3.3. 包的卸载

#### 全局包卸载: `npm uninstall 包名 --global(-g)`

#### 本地包卸载: `npm uninstall 包名`

#### 开发依赖卸载: `npm uninstall 包名 --save-dev(-D)`

#### 生产依赖卸载: `npm uninstall 包名 --save(-S)`

### 3.4. 包的更新：`npm update`

- 先查看过时的包：`npm outdated`；
- 再更新：`npm update`

### 3.5. 清除缓存：`npm cache clean --force`

### 3.6. 上传自己的包

#### 3.6.1. 编写模块(代码)

保存为index.js

```js
exports.sayHello = function(){ 
  return 'Hello World'; 
}
```

#### 3.6.2. 初始化包描述文件: `npm init`

```json
{ 
  "name": "gp19-npm", 
  "version": "1.0.1", 
  "description": "gp19 self module", 
  "main": "index.js",
  "scripts": { 
    "test": "make test" 
  }, 
  "repository": { 
    "type": "Git", 
    "url": "git+https://github.com/lurongtao/gp19-npm.git" 
  }, 
  "keywords": [ 
    "demo" 
  ], 
  "author": "Felixlu", 
  "license": "ISC", 
  "bugs": { 
    "url": "https://github.com/lurongtao/gp19-npm/issues" 
  }, 
  "homepage": "https://github.com/lurongtao/gp19-npm#readme", 
}
```

#### 3.6.3. 注册npm仓库账号后：`npm adduser`

#### 3.6.4. 上传包: `npm publish`

**【❗坑】403 Forbidden：**

- 查看npm源：`npm config get registry`;
- 切换npm源：
  - 法一：`npm config set registry http://registry.npmjs.org`；
  - 法二：`nrm use npm`。

#### 3.6.5. 安装包：`npm install gp19-npm`

#### 3.6.6. 取消发布：`npm unpublish --force`

#### 3.6.7. 使用引入的包

```js
var hello = require('gp19-npm');
hello.sayHello();
```

### 3.7. npm脚本(scripts)

#### 什么是npm脚本

#### 变量

当安装的包类似于gulp，是命令行工具时，本地安装的话不能直接使用，需要到`node_modules/.bin/`找到对应的工具后再在终端中输入命令使用：
![](https://gitee.com/ahuang6027/blog-images/raw/master/images/node-scripts-1122.png)

这样非常繁琐，有什么方法解决呢👇

##### 解决繁琐：scripts

写法一：  
![](https://gitee.com/ahuang6027/blog-images/raw/master/im$$ages/Node工具-本地安装-scripts.png)

写法二：  
因为scripts里边的命令，找包时默认会从node_modules开始找，所以可以简写为：
![](https://gitee.com/ahuang6027/blog-images/raw/master/images/Node工具-包管理-scripts1.png)

## 4. NRM: NPM registry manager (NPM源管理)
